{"version":3,"sources":["../src/interactivetranscript.js"],"names":["define","$","log","debug","init","opts","component","playerid","containerid","cssprefix","config","settings","length","prefix","player","title","M","util","get_string","doPolyfills","transcript","append","el","lastTime","vendors","x","window","requestAnimationFrame","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","clearTimeout","Object","create","prototype","arguments","Error","TypeError","result","Array","forEach","thisArg","T","k","O","len","kValue","call","self","document","createElement","j","m","Element","b","String","trim","replace","c","indexOf","q","p","o","n","name","code","DOMException","message","g","test","d","s","r","getAttribute","split","push","_updateClassName","setAttribute","toString","e","i","item","contains","add","remove","t","splice","toggle","join","defineProperty","l","get","enumerable","configurable","h","number","__defineGetter__","defaults","autoscroll","clickArea","showTitle","showTrackSelector","followPlayerTrack","scrollToCenter","stopScrollWhenInUse","utils","secondsToTime","timeInSeconds","hour","floor","min","sec","localize","string","createEl","elementName","className","extend","obj","type","source","prop","eventEmitter","handlers_","on","object","eventtype","trigger","apply","scrollerProto","initHandlers","addEventListener","isAutoScrolling","userIsScrolling","classList","mouseIsOverTranscript","easeOut","time","start","change","duration","sin","PI","scrollTo","element","newPos","startTime","now","startPos","scrollTop","scrollHeight","clientHeight","updateScroll","to","scrollToElement","canScroll","parent","parentElement","parentOffsetBottom","offsetTop","elementOffsetBottom","relTop","relBottom","centerPosCorrection","round","offsetHeight","inUse","scroller","trackList","activeTrack","validTracks","track","tracks","textTracks","kind","active","mode","widget","that","thewidget","body","event","createTitle","header","textContent","createSelector","selector","option","value","label","language","appendChild","setTrack","querySelector","clickToSeekHandler","clickedClasses","target","clickedTime","currentTime","createLine","cue","line","timestamp","text","_options","tabIndex","innerHTML","createTranscriptBody","fragment","createDocumentFragment","activeCues","cues","scroll","replaceChild","trackCreated","options","currentTrack","setCue","begin","end","lines","children","timeUpdate","updateTrack","ontimeupdate","oncaptionstrackchange","onsubtitlestrackchange"],"mappings":"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","sourcesContent":["define(['jquery', 'core/log'], function ($, log) {\n    \"use strict\"; // jshint ;_;\n\n    log.debug('Interactive Transcript: initialising');\n\n    return {\n\n        init: function (opts) {\n\n            var component = opts['component'];\n            var playerid = opts['playerid'];\n            var containerid = opts['containerid'];\n            var cssprefix = opts['cssprefix'];\n            var config = {};\n            config.settings = {};\n            if (playerid && $('#' + playerid).length) {\n                config.component = component;\n                config.prefix = cssprefix;\n                config.player = $('#' + playerid)[0];\n                config.title = M.util.get_string('transcripttitle', component);\n                this.doPolyfills();\n                var transcript = this.transcript(config);\n                $('#' + containerid).append(transcript.el());\n            }\n        },\n\n        doPolyfills: function () {\n            // requestAnimationFrame polyfill by Erik MÃ¶ller. fixes from Paul Irish and Tino Zijdel\n            // MIT license\n            // https://gist.github.com/paulirish/1579671\n            var lastTime = 0;\n            var vendors = ['ms', 'moz', 'webkit', 'o'];\n            for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n                window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n                window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame']\n                    || window[vendors[x] + 'CancelRequestAnimationFrame'];\n            }\n            if (!window.requestAnimationFrame)\n                window.requestAnimationFrame = function (callback, element) {\n                    var currTime = new Date().getTime();\n                    var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n                    var id = window.setTimeout(function () {\n                            callback(currTime + timeToCall);\n                        },\n                        timeToCall);\n                    lastTime = currTime + timeToCall;\n                    return id;\n                };\n            if (!window.cancelAnimationFrame)\n                window.cancelAnimationFrame = function (id) {\n                    clearTimeout(id);\n                };\n\n            // Object.create() polyfill\n            // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create#Polyfill\n            if (typeof Object.create != 'function') {\n                Object.create = (function () {\n                    var Object = function () {\n                    };\n                    return function (prototype) {\n                        if (arguments.length > 1) {\n                            throw Error('Second argument not supported');\n                        }\n                        if (typeof prototype != 'object') {\n                            throw TypeError('Argument must be an object');\n                        }\n                        Object.prototype = prototype;\n                        var result = new Object();\n                        Object.prototype = null;\n                        return result;\n                    };\n                })();\n            }\n\n// forEach polyfill\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach#Polyfill\n            if (!Array.prototype.forEach) {\n                Array.prototype.forEach = function (callback, thisArg) {\n                    var T, k;\n                    if (this == null) {\n                        throw new TypeError(' this is null or not defined');\n                    }\n                    var O = Object(this);\n                    var len = O.length >>> 0;\n                    if (typeof callback != \"function\") {\n                        throw new TypeError(callback + ' is not a function');\n                    }\n                    if (arguments.length > 1) {\n                        T = thisArg;\n                    }\n                    k = 0;\n                    while (k < len) {\n                        var kValue;\n                        if (k in O) {\n                            kValue = O[k];\n                            callback.call(T, kValue, k, O);\n                        }\n                        k++;\n                    }\n                };\n            }\n\n            // classList polyfill\n            /*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js*/\n            if (\"document\" in self && !(\"classList\" in document.createElement(\"_\"))) {\n                (function (j) {\n                    \"use strict\";\n                    if (!(\"Element\" in j)) {\n                        return\n                    }\n                    var a = \"classList\", f = \"prototype\", m = j.Element[f], b = Object, k = String[f].trim || function () {\n                        return this.replace(/^\\s+|\\s+$/g, \"\")\n                    }, c = Array[f].indexOf || function (q) {\n                        var p = 0, o = this.length;\n                        for (; p < o; p++) {\n                            if (p in this && this[p] === q) {\n                                return p\n                            }\n                        }\n                        return -1\n                    }, n = function (o, p) {\n                        this.name = o;\n                        this.code = DOMException[o];\n                        this.message = p\n                    }, g = function (p, o) {\n                        if (o === \"\") {\n                            throw new n(\"SYNTAX_ERR\", \"An invalid or illegal string was specified\")\n                        }\n                        if (/\\s/.test(o)) {\n                            throw new n(\"INVALID_CHARACTER_ERR\", \"String contains an invalid character\")\n                        }\n                        return c.call(p, o)\n                    }, d = function (s) {\n                        var r = k.call(s.getAttribute(\"class\") || \"\"), q = r ? r.split(/\\s+/) : [], p = 0, o = q.length;\n                        for (; p < o; p++) {\n                            this.push(q[p])\n                        }\n                        this._updateClassName = function () {\n                            s.setAttribute(\"class\", this.toString())\n                        }\n                    }, e = d[f] = [], i = function () {\n                        return new d(this)\n                    };\n                    n[f] = Error[f];\n                    e.item = function (o) {\n                        return this[o] || null\n                    };\n                    e.contains = function (o) {\n                        o += \"\";\n                        return g(this, o) !== -1\n                    };\n                    e.add = function () {\n                        var s = arguments, r = 0, p = s.length, q, o = false;\n                        do {\n                            q = s[r] + \"\";\n                            if (g(this, q) === -1) {\n                                this.push(q);\n                                o = true\n                            }\n                        } while (++r < p);\n                        if (o) {\n                            this._updateClassName()\n                        }\n                    };\n                    e.remove = function () {\n                        var t = arguments, s = 0, p = t.length, r, o = false;\n                        do {\n                            r = t[s] + \"\";\n                            var q = g(this, r);\n                            if (q !== -1) {\n                                this.splice(q, 1);\n                                o = true\n                            }\n                        } while (++s < p);\n                        if (o) {\n                            this._updateClassName()\n                        }\n                    };\n                    e.toggle = function (p, q) {\n                        p += \"\";\n                        var o = this.contains(p), r = o ? q !== true && \"remove\" : q !== false && \"add\";\n                        if (r) {\n                            this[r](p)\n                        }\n                        return !o\n                    };\n                    e.toString = function () {\n                        return this.join(\" \")\n                    };\n                    if (b.defineProperty) {\n                        var l = {get: i, enumerable: true, configurable: true};\n                        try {\n                            b.defineProperty(m, a, l)\n                        } catch (h) {\n                            if (h.number === -2146823252) {\n                                l.enumerable = false;\n                                b.defineProperty(m, a, l)\n                            }\n                        }\n                    } else {\n                        if (b[f].__defineGetter__) {\n                            m.__defineGetter__(a, i)\n                        }\n                    }\n                }(self))\n            }\n        },//end of polyfills\n\n\n// Defaults\n        defaults: {\n            autoscroll: true,\n            clickArea: 'line', //the clickable part of line text,line,timestamp, none\n            showTitle: true, //the title\n            showTrackSelector: false, //the drop down box of caption tracks\n            followPlayerTrack: true,\n            scrollToCenter: false, //show current text in center\n            stopScrollWhenInUse: true, //stop scrolling when user interacting\n        },\n\n        /*global */\n        utils: {\n            prefix: 'transcript',\n            secondsToTime: function (timeInSeconds) {\n                var hour = Math.floor(timeInSeconds / 3600);\n                var min = Math.floor(timeInSeconds % 3600 / 60);\n                var sec = Math.floor(timeInSeconds % 60);\n                sec = (sec < 10) ? '0' + sec : sec;\n                min = (hour > 0 && min < 10) ? '0' + min : min;\n                if (hour > 0) {\n                    return hour + ':' + min + ':' + sec;\n                }\n                return min + ':' + sec;\n            },\n            localize: function (string) {\n                return string; // TODO: do something here;\n            },\n            createEl: function (elementName, className) {\n                className = className || '';\n                var el = document.createElement(elementName);\n                el.className = className;\n                return el;\n            },\n            extend: function (obj) {\n                var type = typeof obj;\n                if (!(type === 'function' || type === 'object' && !!obj)) {\n                    return obj;\n                }\n                var source, prop;\n                for (var i = 1, length = arguments.length; i < length; i++) {\n                    source = arguments[i];\n                    for (prop in source) {\n                        obj[prop] = source[prop];\n                    }\n                }\n                return obj;\n            }\n        },\n\n        eventEmitter: {\n            handlers_: [],\n            on: function on(object, eventtype, callback) {\n                if (typeof callback === 'function') {\n                    this.handlers_.push([object, eventtype, callback]);\n                } else {\n                    throw new TypeError('Callback is not a function.');\n                }\n            },\n            trigger: function trigger(object, eventtype) {\n                this.handlers_.forEach(function (h) {\n                    if (h[0] === object &&\n                        h[1] === eventtype) {\n                        h[2].apply();\n                    }\n                });\n            }\n        },\n\n        scrollerProto: function (config) {\n            var initHandlers = function (el) {\n                var self = this;\n                // The scroll event. We want to keep track of when the user is scrolling the transcript.\n                el.addEventListener('scroll', function () {\n                    if (self.isAutoScrolling) {\n\n                        // If isAutoScrolling was set to true, we can set it to false and then ignore this event.\n                        // It wasn't the user.\n                        self.isAutoScrolling = false; // event handled\n                    } else {\n\n                        // We only care about when the user scrolls. Set userIsScrolling to true and add a nice class.\n                        self.userIsScrolling = true;\n                        el.classList.add('is-inuse');\n                    }\n                });\n\n                // The mouseover event.\n                el.addEventListener('mouseenter', function () {\n                    self.mouseIsOverTranscript = true;\n                });\n                el.addEventListener('mouseleave', function () {\n                    self.mouseIsOverTranscript = false;\n\n                    // Have a small delay before deciding user as done interacting.\n                    setTimeout(function () {\n\n                        // Make sure the user didn't move the pointer back in.\n                        if (!self.mouseIsOverTranscript) {\n                            self.userIsScrolling = false;\n                            el.classList.remove('is-inuse');\n                        }\n                    }, 1000);\n                });\n            };\n\n            // Init instance variables\n            var init = function (element) {\n                this.element = element;\n                this.userIsScrolling = false;\n\n                //default to true in case user isn't using a mouse;\n                this.mouseIsOverTranscript = true;\n                this.isAutoScrolling = true;\n                initHandlers.call(this, this.element);\n                return this;\n            };\n\n            // Easing function for smoothness.\n            var easeOut = function (time, start, change, duration) {\n                return start + change * Math.sin(Math.min(1, time / duration) * (Math.PI / 2));\n            };\n\n            // Animate the scrolling.\n            var scrollTo = function (element, newPos, duration) {\n                var startTime = Date.now();\n                var startPos = element.scrollTop;\n                var self = this;\n\n                // Don't try to scroll beyond the limits. You won't get there and this will loop forever.\n                newPos = Math.max(0, newPos);\n                newPos = Math.min(element.scrollHeight - element.clientHeight, newPos);\n                var change = newPos - startPos;\n\n                // This inner function is called until the elements scrollTop reaches newPos.\n                var updateScroll = function () {\n                    var now = Date.now();\n                    var time = now - startTime;\n                    self.isAutoScrolling = true;\n                    element.scrollTop = easeOut(time, startPos, change, duration);\n                    if (element.scrollTop !== newPos) {\n                        requestAnimationFrame(updateScroll, element);\n                    }\n                };\n                requestAnimationFrame(updateScroll, element);\n            };\n\n            // Scroll an element's parent so the element is brought into view.\n            var scrollToElement = function (element) {\n                if (this.canScroll()) {\n                    var parent = element.parentElement;\n                    var parentOffsetBottom = parent.offsetTop + parent.clientHeight;\n                    var elementOffsetBottom = element.offsetTop + element.clientHeight;\n                    var relTop = element.offsetTop;\n                    var relBottom = (element.offsetTop + element.clientHeight);\n                    var centerPosCorrection = 0;\n                    var newPos;\n                    /*\n                                        console.log('element.offsetTop: ' + element.offsetTop );\n                                        console.log('element.clientHeight: ' + element.clientHeight );\n                                        console.log('parent.offsetTop: ' + parent.offsetTop );\n                                        console.log('parent.scrollTop: ' + parent.scrollTop );\n                                        console.log('parent.clientHeight: ' + parent.clientHeight );\n                                        console.log(element);\n                                        console.log(parent);\n                    */\n                    //scroll to center if we must\n                    if (config.settings.scrollToCenter) {\n                        centerPosCorrection = Math.round(parent.clientHeight / 2 - element.clientHeight / 2);\n                    }\n                    // If the top of the line is above the top of the parent view, were scrolling up,\n                    // so we want to move the top of the element downwards to match the top of the parent.\n                    if (relTop < parent.scrollTop + centerPosCorrection) {\n                        newPos = element.offsetTop - centerPosCorrection;\n\n                        // If the bottom of the line is below the parent view, we're scrolling down, so we want the\n                        // bottom edge of the line to move up to meet the bottom edge of the parent.\n                    } else if (relBottom > (parent.scrollTop + parent.clientHeight) - centerPosCorrection) {\n                        newPos = elementOffsetBottom + centerPosCorrection;\n                    }\n\n                    // Don't try to scroll if we haven't set a new position.  If we didn't\n                    // set a new position the line is already in view (i.e. It's not above\n                    // or below the view)\n                    // And don't try to scroll when the element is already in position.\n                    if (newPos !== undefined && parent.scrollTop !== newPos) {\n                        scrollTo.call(this, parent, newPos, 400);\n                    }\n                }\n            };\n\n\n            // Return whether the element is scrollable.\n            var canScroll = function () {\n                var el = this.element;\n                //console.log(el.scrollHeight + ' ' + el.offsetHeight);\n                return el.scrollHeight > el.offsetHeight;\n            };\n\n            // Return whether the user is interacting with the transcript.\n            var inUse = function () {\n                return this.userIsScrolling;\n            };\n\n            return {\n                init: init,\n                to: scrollToElement,\n                canScroll: canScroll,\n                inUse: inUse\n            }\n        },\n\n        scroller: function (element, config) {\n            return Object.create(this.scrollerProto(config)).init(element);\n        },\n\n        /*global config*/\n        trackList: function (config) {\n            var activeTrack;\n            return {\n                get: function () {\n                    var validTracks = [];\n                    var i, track;\n                    config.tracks = config.player.textTracks;\n                    for (i = 0; i < config.tracks.length; i++) {\n                        track = config.tracks[i];\n                        if (track.kind === 'captions' || track.kind === 'subtitles') {\n                            validTracks.push(track);\n                        }\n                    }\n                    return validTracks;\n                },\n                active: function (tracks) {\n                    var i, track;\n                    for (i = 0; i < config.tracks.length; i++) {\n                        track = config.tracks[i];\n                        if (track.mode === 'showing') {\n                            activeTrack = track;\n                            return track;\n                        }\n                    }\n                    // fallback to first track\n                    return activeTrack || tracks[0];\n                },\n            };\n        },\n\n        /*globals utils, eventEmitter,scrollable*/\n        widget: function (config) {\n            var that = this;\n            var thewidget = {};\n            thewidget.element = {};\n            thewidget.body = {};\n            var on = function (event, callback) {\n                eventEmitter.on(that, event, callback);\n            };\n            var trigger = function (event) {\n                eventEmitter.trigger(that, event);\n            };\n            var createTitle = function () {\n                var header = that.utils.createEl('header', config.prefix + '-header');\n                header.textContent = config.title;\n                return header;\n            };\n            var createSelector = function () {\n                var selector = that.utils.createEl('select', config.prefix + '-selector');\n                config.validTracks.forEach(function (track, i) {\n                    var option = document.createElement('option');\n                    option.value = i;\n                    option.textContent = track.label + ' (' + track.language + ')';\n                    selector.appendChild(option);\n                });\n                selector.addEventListener('change', function (e) {\n                    setTrack(document.querySelector('#' + config.prefix + '-' + config.player.id + ' option:checked').value);\n                    trigger('trackchanged');\n                });\n                return selector;\n            };\n            var clickToSeekHandler = function (event) {\n                var clickedClasses = event.target.classList;\n                var clickedTime = event.target.getAttribute('data-begin') || event.target.parentElement.getAttribute('data-begin');\n                if (clickedTime !== undefined && clickedTime !== null) { // can be zero\n                    if ((config.settings.clickArea === 'line') || // clickArea: 'line' activates on all elements\n                        (config.settings.clickArea === 'timestamp' && clickedClasses.contains(config.prefix + '-timestamp')) ||\n                        (config.settings.clickArea === 'text' && clickedClasses.contains(config.prefix + '-text'))) {\n                        config.player.currentTime = clickedTime;\n                    }\n                }\n            };\n            var createLine = function (cue) {\n                var line = that.utils.createEl('div', config.prefix + '-line');\n                var timestamp = that.utils.createEl('span', config.prefix + '-timestamp');\n                var text = that.utils.createEl('span', config.prefix + '-text');\n                line.setAttribute('data-begin', cue.startTime);\n                line.setAttribute('tabindex', thewidget._options.tabIndex || 0);\n                timestamp.textContent = that.utils.secondsToTime(cue.startTime);\n                text.innerHTML = cue.text;\n                line.appendChild(timestamp);\n                line.appendChild(text);\n                return line;\n            };\n            var createTranscriptBody = function (track) {\n                if (typeof track !== 'object') {\n                    track = config.player.textTracks()[track];\n                }\n                var body = that.utils.createEl('div', config.prefix + '-body');\n                var line, i;\n                var fragment = document.createDocumentFragment();\n                // activeCues returns null when the track isn't loaded (for now?)\n                if (!track.activeCues) {\n                    // If cues aren't loaded, set mode to hidden, wait, and try again.\n                    // But don't hide an active track. In that case, just wait and try again.\n                    if (track.mode !== 'showing') {\n                        track.mode = 'hidden';\n                    }\n                    window.setTimeout(function () {\n                        createTranscriptBody(track);\n                    }, 100);\n                } else {\n                    var cues = track.cues;\n                    for (i = 0; i < cues.length; i++) {\n                        line = createLine(cues[i]);\n                        fragment.appendChild(line);\n                    }\n                    body.innerHTML = '';\n                    body.appendChild(fragment);\n                    body.setAttribute('lang', track.language);\n                    body.scroll = that.scroller(body, config);\n                    body.addEventListener('click', clickToSeekHandler);\n                    thewidget.element.replaceChild(body, thewidget.body);\n                    thewidget.body = body;\n                }\n\n            };\n            var create = function (options) {\n                var el = document.createElement('div');\n                thewidget._options = options;\n                thewidget.element = el;\n                el.setAttribute('id', config.prefix + '-' + config.player.id);\n                if (config.settings.showTitle) {\n                    var title = createTitle();\n                    el.appendChild(title);\n                }\n                if (config.settings.showTrackSelector) {\n                    var selector = createSelector();\n                    el.appendChild(selector);\n                }\n                thewidget.body = that.utils.createEl('div', config.prefix + '-body');\n                el.appendChild(thewidget.body);\n                setTrack(config.currentTrack);\n                return this;\n            };\n            var setTrack = function (track, trackCreated) {\n                createTranscriptBody(track, trackCreated);\n            };\n            var setCue = function (time) {\n                var active, i, line, begin, end;\n                var lines = thewidget.body.children;\n                for (i = 0; i < lines.length; i++) {\n                    line = lines[i];\n                    begin = line.getAttribute('data-begin');\n                    if (i < lines.length - 1) {\n                        end = lines[i + 1].getAttribute('data-begin');\n                    } else {\n                        end = config.player.duration || Infinity;\n                    }\n                    if (time > begin && time < end) {\n                        if (!line.classList.contains('is-active')) { // don't update if it hasn't changed\n                            line.classList.add('is-active');\n                            if (config.settings.autoscroll && !(config.settings.stopScrollWhenInUse && thewidget.body.scroll.inUse())) {\n                                thewidget.body.scroll.to(line);\n                            }\n                        }\n                    } else {\n                        line.classList.remove('is-active');\n                    }\n                }\n            };\n            var el = function () {\n                return thewidget.element;\n            };\n            return {\n                create: create,\n                setTrack: setTrack,\n                setCue: setCue,\n                el: el,\n                on: on,\n                trigger: trigger,\n            };\n        },\n\n        transcript: function (config) {\n            var that = this;\n            var options = this.defaults;\n            this.utils.prefix = 'transcript';\n\n            config.validTracks = this.trackList(config).get();\n            config.currentTrack = this.trackList(config).active(config.validTracks);\n            config.settings = options;\n            config.widget = this.widget(config).create(options);\n\n            var timeUpdate = function () {\n                config.widget.setCue(config.player.currentTime);\n            };\n            var updateTrack = function () {\n                config.currentTrack = that.trackList(config).active(config.validTracks);\n                config.widget.setTrack(config.currentTrack);\n            };\n            if (config.validTracks.length > 0) {\n                updateTrack();\n                config.player.ontimeupdate = timeUpdate;\n                if (config.settings.followPlayerTrack) {\n                    config.player.oncaptionstrackchange = updateTrack;\n                    config.player.onsubtitlestrackchange = updateTrack;\n                }\n            } else {\n                throw new Error('transcript: No tracks found!');\n            }\n            return {\n                el: function () {\n                    return config.widget.el();\n                },\n                setTrack: config.widget.setTrack\n            };\n        }\n\n    };//end of return object\n});"],"file":"interactivetranscript.min.js"}